{{- $Values := (.helm).Values | default .Values }}
condition: '{{ true }}'
name: api-availability
rules:
- alert: seriveapidown
  annotations:
    description: 'api for service  "{{`{{`}} $labels.service {{`}}`}}" in cluster "{{`{{`}} $labels.cluster {{`}}`}}" is not responding for more than 5 minutes'
    summary: api unresponsive
  expr: |-
    max(probe_success) by (cluster,service) == 0
  for: 5m
  labels:
    severity: critical
  condition: '{{ true }}'
